{% extends "core/base.jinja" %}

{% block title %}
  {% trans %}Poster{% endtrans %}
{% endblock %}

{% block additional_css %}
  <link rel="stylesheet" href="{{ static('com/css/posters.scss') }}">
{% endblock %}

{% block content %}
  <div id="poster_list" x-data="{ active: null }">

    <div id="title">
      <h3>{{ links["title"] }}</h3>
      <div id="links" class="{{ links["position"] }}">
        {% for link in links["links"] %}
          <a id="{{ link["pk"] }}" class="link" href="{{ link["url"] }}">{{ link["label"] }}</a>
        {% endfor %}
      </div>
    </div>

    <div id="posters">

      {% if poster_list.count() == 0 %}
        <div id="no-posters">{% trans %}No posters{% endtrans %}</div>
      {% else %}

        {% for poster in poster_list %}
          <div class="poster{% if not poster.is_moderated %} not_moderated{% endif %}">
            <div class="name">{{ poster.name }}</div>
            <div
              class="image"
              hover="{% trans %}Click to expand{% endtrans %}"
              @click="active = $el.firstElementChild"
            >
              <img src="{{ poster.file.url }}"></img>
            </div>
            <div class="dates">
              <div class="begin">{{ poster.date_begin | localtime | date("d/M/Y H:m") }}</div>
              <div class="end">{{ poster.date_end | localtime | date("d/M/Y H:m") }}</div>
            </div>
            <a class="{{ action["class"] }}" href="{{ action["get_url"](club, poster) }}">{{ action["label"] }}</a>
            <div class="tooltip">
              <ul>
                {% for screen in poster.screens.all() %}
                  <li>{{ screen }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>
        {% endfor %}

      {% endif %}

    </div>

    <div
      id="view"
      @keyup.escape.window="active = null"
      @click="active = null"
      :class="{active: active !== null}"
    >
      <div id="placeholder"><img :src="active?.src"></div>
    </div>

  </div>
{% endblock %}



