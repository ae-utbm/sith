var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function webpackUniversalModuleDefinition(e,a){t=a()})(0,(function(){return function(e){var t={};function __webpack_require__(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:false,exports:{}};e[a].call(i.exports,i,i.exports,__webpack_require__);i.l=true;return i.exports}__webpack_require__.m=e;__webpack_require__.c=t;__webpack_require__.i=function(e){return e};__webpack_require__.d=function(e,t,a){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:false,enumerable:true,get:a})};__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};__webpack_require__.d(t,"a",t);return t};__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=4)}([function(t,a,i){var n=i(2);var o=i(1);var r=i(3),d=r.removeEles,l=r.setStyles,s=r.createElement,u=r.getPixelRatio,c=r.getOffset;var v=function cxtmenu(t){var a=o({},n,t);var i=this||e;var r=i.container();var v=void 0;var p={options:a,handlers:[],container:s({class:"cxtmenu"})};var f=p.container;var h=s();var g=s({tag:"canvas"});var m=[];var x=g.getContext("2d");var b=100;var P=2*(b+a.activePadding);var w=void 0;var _=void 0;r.insertBefore(f,r.firstChild);f.appendChild(h);h.appendChild(g);l(f,{position:"absolute",zIndex:a.zIndex,userSelect:"none",pointerEvents:"none"});["mousedown","mousemove","mouseup","contextmenu"].forEach((function(e){f.addEventListener(e,(function(e){e.preventDefault();return false}))}));l(h,{display:"none",width:P+"px",height:P+"px",position:"absolute",zIndex:1,marginLeft:-a.activePadding+"px",marginTop:-a.activePadding+"px",userSelect:"none"});g.width=P;g.height=P;function createMenuItems(e,t){d(".cxtmenu-item",h);var i=2*Math.PI/m.length;var n=Math.PI/2;var o=n+i;for(var r=0;r<m.length;r++){var u=m[r];var c=(n+o)/2;var v=(e+t)/2*Math.cos(c);var p=(e+t)/2*Math.sin(c);var f=1*Math.abs((e-t)*Math.cos(c));var g=1*Math.abs((e-t)*Math.sin(c));f=Math.max(f,g);var x=s({class:"cxtmenu-item"});l(x,{color:a.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+a.itemTextShadowColor+", 1px -1px 2px "+a.itemTextShadowColor+", -1px 1px 2px "+a.itemTextShadowColor+", 1px 1px 1px "+a.itemTextShadowColor,left:"50%",top:"50%","min-height":f+"px",width:f+"px",height:f+"px",marginLeft:v-f/2+"px",marginTop:-p-f/2+"px"});var b=s({class:"cxtmenu-content"});u.content instanceof HTMLElement?b.appendChild(u.content):b.innerHTML=u.content;l(b,{width:f+"px",height:f+"px","vertical-align":"middle",display:"table-cell"});l(b,u.contentStyle||{});true!==u.disabled&&false!==u.enabled||b.setAttribute("class","cxtmenu-content cxtmenu-disabled");h.appendChild(x);x.appendChild(b);n+=i;o+=i}}function queueDrawBg(e,t){M.drawBg=[e,t]}function drawBg(e,t){x.globalCompositeOperation="source-over";x.clearRect(0,0,P,P);x.fillStyle=a.fillColor;var i=2*Math.PI/m.length;var n=Math.PI/2;var o=n+i;for(var r=0;r<m.length;r++){var d=m[r];d.fillColor&&(x.fillStyle=d.fillColor);x.beginPath();x.moveTo(e+a.activePadding,e+a.activePadding);x.arc(e+a.activePadding,e+a.activePadding,e,2*Math.PI-n,2*Math.PI-o,true);x.closePath();x.fill();n+=i;o+=i;x.fillStyle=a.fillColor}x.globalCompositeOperation="destination-out";x.strokeStyle="white";x.lineWidth=a.separatorWidth;n=Math.PI/2;o=n+i;for(var l=0;l<m.length;l++){var s=e*Math.cos(n);var u=e*Math.sin(n);x.beginPath();x.moveTo(e+a.activePadding,e+a.activePadding);x.lineTo(e+a.activePadding+s,e+a.activePadding-u);x.closePath();x.stroke();n+=i;o+=i}x.fillStyle="white";x.globalCompositeOperation="destination-out";x.beginPath();x.arc(e+a.activePadding,e+a.activePadding,t+a.spotlightPadding,0,2*Math.PI,true);x.closePath();x.fill();x.globalCompositeOperation="source-over"}function queueDrawCommands(e,t,a,i,n){M.drawCommands=[e,t,a,i,n]}function drawCommands(e,t,i,n,o){var r=2*Math.PI/m.length;var d=Math.PI/2;var l=d+r;d+=r*w;l+=r*w;x.fillStyle=a.activeFillColor;x.strokeStyle="black";x.lineWidth=1;x.beginPath();x.moveTo(i+a.activePadding,i+a.activePadding);x.arc(i+a.activePadding,i+a.activePadding,i+a.activePadding,2*Math.PI-d,2*Math.PI-l,true);x.closePath();x.fill();x.fillStyle="white";x.globalCompositeOperation="destination-out";var s=i+a.activePadding+e/i*(o+a.spotlightPadding-a.indicatorSize/4);var u=i+a.activePadding+t/i*(o+a.spotlightPadding-a.indicatorSize/4);var c=Math.PI/4-n;x.translate(s,u);x.rotate(c);var v=a.indicatorSize>o+a.spotlightPadding?o+a.spotlightPadding:a.indicatorSize;x.beginPath();x.fillRect(-v/2,-v/2,v,v);x.closePath();x.fill();x.rotate(-c);x.translate(-s,-u);x.beginPath();x.arc(i+a.activePadding,i+a.activePadding,o+a.spotlightPadding,0,2*Math.PI,true);x.closePath();x.fill();x.globalCompositeOperation="source-over"}function updatePixelRatio(){var e=u();var t=P;var a=P;g.width=t*e;g.height=a*e;g.style.width=t+"px";g.style.height=a+"px";x.setTransform(1,0,0,1,0,0);x.scale(e,e)}var y=true;var M={};var S=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};var R=function redraw(){M.drawBg&&drawBg.apply(null,M.drawBg);M.drawCommands&&drawCommands.apply(null,M.drawCommands);M={};y&&S(redraw)};updatePixelRatio();R();var C=void 0,E=void 0,I=void 0;var q={on:function on(t,a,n){var o=n;"core"===a&&(o=function _fn(t){if(t.cyTarget===i||t.target===i)return n.apply(this||e,[t])});p.handlers.push({events:t,selector:a,fn:o});"core"===a?i.on(t,o):i.on(t,a,o);return this||e}};function addEventListeners(){var t=void 0;var n=false;var o=void 0;var d=void 0;var s=void 0;var u=void 0;var p=void 0;var f=void 0;var g=function restoreZoom(){d&&i.userZoomingEnabled(true)};var x=function restoreGrab(){t&&v.grabify()};var y=function restorePan(){s&&i.userPanningEnabled(true)};var M=function restoreBoxSeln(){u&&i.boxSelectionEnabled(true)};var S=function restoreGestures(){x();g();y();M()};window.addEventListener("resize",updatePixelRatio);q.on("resize",(function(){updatePixelRatio()})).on(a.openMenuEvents,a.selector,(function(o){v=this||e;var f=this||e;var g=(this||e)===i;if(n){h.style.display="none";n=false;S()}if("function"===typeof a.commands){var x=a.commands(v);if(x.then)x.then((function(e){m=e;openMenu()}));else{m=x;openMenu()}}else{m=a.commands;openMenu()}function openMenu(){if(m&&0!==m.length){d=i.userZoomingEnabled();i.userZoomingEnabled(false);s=i.userPanningEnabled();i.userPanningEnabled(false);u=i.boxSelectionEnabled();i.boxSelectionEnabled(false);t=v.grabbable&&v.grabbable();t&&v.ungrabify();var e=void 0,x=void 0,y=void 0;if(!g&&f&&f.isNode instanceof Function&&f.isNode()&&!f.isParent()&&!a.atMouse){e=f.renderedPosition();x=f.renderedOuterWidth();f.renderedOuterHeight();y=x/2;y=!a.adaptativeNodeSpotlightRadius&&a.minSpotlightRadius?Math.max(y,a.minSpotlightRadius):y;y=!a.adaptativeNodeSpotlightRadius&&a.maxSpotlightRadius?Math.min(y,a.maxSpotlightRadius):y}else{e=o.renderedPosition||o.cyRenderedPosition;x=1;1;y=x/2;y=a.minSpotlightRadius?Math.max(y,a.minSpotlightRadius):y;y=a.maxSpotlightRadius?Math.min(y,a.maxSpotlightRadius):y}_=c(r);C=e.x;E=e.y;b=x/2+(a.menuRadius instanceof Function?a.menuRadius(v):Number(a.menuRadius));P=2*(b+a.activePadding);updatePixelRatio();l(h,{width:P+"px",height:P+"px",display:"block",left:e.x-b+"px",top:e.y-b+"px"});createMenuItems(b,y);queueDrawBg(b,y);w=void 0;n=true;p=o}}})).on("cxtdrag tapdrag",a.selector,o=function dragHandler(e){if(n){e.preventDefault();var t=e.originalEvent;var i=t.touches&&t.touches.length>0;var o=(i?t.touches[0].pageX:t.pageX)-window.pageXOffset;var r=(i?t.touches[0].pageY:t.pageY)-window.pageYOffset;w=void 0;var d=o-_.left-C;var l=r-_.top-E;0===d&&(d=.01);var s=Math.sqrt(d*d+l*l);var u=(l*l-s*s-d*d)/(-2*s*d);var c=Math.acos(u);var p=void 0;if(v&&v.isNode instanceof Function&&v.isNode()&&!v.isParent()&&!a.atMouse){p=v.renderedOuterWidth();I=p/2;I=!a.adaptativeNodeSpotlightRadius&&a.minSpotlightRadius?Math.max(I,a.minSpotlightRadius):I;I=!a.adaptativeNodeSpotlightRadius&&a.maxSpotlightRadius?Math.min(I,a.maxSpotlightRadius):I}else{p=1;I=p/2;I=a.minSpotlightRadius?Math.max(I,a.minSpotlightRadius):I;I=a.maxSpotlightRadius?Math.min(I,a.maxSpotlightRadius):I}b=p/2+(a.menuRadius instanceof Function?a.menuRadius(v):Number(a.menuRadius));if(s<I+a.spotlightPadding||"number"===typeof a.outsideMenuCancel&&s>b+a.activePadding+a.outsideMenuCancel)queueDrawBg(b,I);else{queueDrawBg(b,I);var f=d*b/s;var h=l*b/s;l>0&&(c=Math.PI+Math.abs(c-Math.PI));var g=2*Math.PI/m.length;var x=Math.PI/2;var P=x+g;for(var y=0;y<m.length;y++){var M=m[y];var S=x<=c&&c<=P||x<=c+2*Math.PI&&c+2*Math.PI<=P;true!==M.disabled&&false!==M.enabled||(S=false);if(S){w=y;break}x+=g;P+=g}queueDrawCommands(f,h,b,c,I)}}}).on("tapdrag",o).on("mousemove",(function(){if(void 0!==w){var e=m[w].hover;if(e){f!==w&&e.apply(v,[v,p]);f=w}}})).on("cxttapend tapend",(function(){h.style.display="none";if(void 0!==w){var e=m[w].select;if(e){e.apply(v,[v,p]);w=void 0}}f=void 0;n=false;S()}))}function removeEventListeners(){var e=p.handlers;for(var t=0;t<e.length;t++){var a=e[t];"core"===a.selector?i.off(a.events,a.fn):i.off(a.events,a.selector,a.fn)}window.removeEventListener("resize",updatePixelRatio)}function destroyInstance(){y=false;removeEventListeners();f.remove()}addEventListeners();return{destroy:function destroy(){destroyInstance()}}};t.exports=v},function(e,t,a){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];a.filter((function(e){return null!=e})).forEach((function(t){Object.keys(t).forEach((function(a){return e[a]=t[a]}))}));return e}},function(e,t,a){var i={menuRadius:function menuRadius(e){return 100},selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,adaptativeNodeSpotlightRadius:false,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:false,outsideMenuCancel:false};e.exports=i},function(e,t,a){var i=function removeEles(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;var a=t.querySelectorAll(e);for(var i=0;i<a.length;i++){var n=a[i];n.parentNode.removeChild(n)}};var n=function setStyles(e,t){var a=Object.keys(t);for(var i=0,n=a.length;i<n;i++)e.style[a[i]]=t[a[i]]};var o=function createElement(e){e=e||{};var t=document.createElement(e.tag||"div");t.className=e.class||"";e.style&&n(t,e.style);return t};var r=function getPixelRatio(){return window.devicePixelRatio||1};var d=function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:t.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}};e.exports={removeEles:i,setStyles:n,createElement:o,getPixelRatio:r,getOffset:d}},function(e,t,a){var i=a(0);var n=function register(e){e&&e("core","cxtmenu",i)};"undefined"!==typeof cytoscape&&n(cytoscape);e.exports=n}])}));var a=t;const i=t.cytoscapeCxtmenu,n=t.removeEles,o=t.setStyles,r=t.createElement,d=t.getPixelRatio,l=t.getOffset;export{r as createElement,i as cytoscapeCxtmenu,a as default,l as getOffset,d as getPixelRatio,n as removeEles,o as setStyles};

//# sourceMappingURL=cytoscape-cxtmenu.js.map